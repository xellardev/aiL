<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Xellor Demo</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    nav button { margin-right: 10px; padding: 5px 10px; cursor: pointer; }
    #content { margin-top: 20px; border-top: 1px solid #ccc; padding-top: 10px; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h1>Xellor Demo</h1>
  <nav>
    <button onclick="navigate('Home')">Home</button>
    <button onclick="navigate('Docs')">Docs</button>
    <button onclick="navigate('loader.v1')">Loader v1</button>
    <button onclick="navigate('loader.v2')">Loader v2</button>
  </nav>

  <div id="content">Загрузка...</div>

  <script>
    const routes = {
      'Home': 'home.html',
      'Docs': 'docs.html',
      'loader.v1': 'scripts/loader-v1.js',
      'loader.v2': 'scripts/loader-v2.js'
    };

    function navigate(page) {
      window.history.pushState({}, '', page);
      loadContent(page);
    }

    function loadContent(page) {
      const path = routes[page];
      if(!path) return;

      if(page.startsWith('loader')) {
        document.getElementById('content').innerHTML = 'Загрузка Lua скрипта...';
        fetch(path).then(r => r.text()).then(jsCode => {
          eval(jsCode); // выполняем JS, который подгружает Lua с GitHub
        });
      } else {
        fetch(path).then(r => r.text()).then(html => {
          document.getElementById('content').innerHTML = html;
        });
      }
    }

    window.addEventListener('popstate', () => {
      const path = window.location.pathname.split('/').pop();
      loadContent(path || 'Home');
    });

    loadContent(window.location.pathname.split('/').pop() || 'Home');
  </script>
</body>
</html>
